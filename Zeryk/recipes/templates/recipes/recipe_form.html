{% extends "recipes/box.html" %}
{% load crispy_forms_tags %}
<<<<<<< HEAD
{% load i18n %}


{% block scripts %}
<script>
  function searchIngredients() {
    const query = document.getElementById('ingredient-search').value;
    fetch(`/search-ingredients/?query=${query}`)
      .then(response => response.json())
      .then(data => {
        const ingredientResults = document.getElementById('ingredient-results');
        ingredientResults.innerHTML = '';
        if (data.ingredients) {
          const ul = document.createElement('ul');
          data.ingredients.forEach(ingredient => {
            const li = document.createElement('li');
            li.textContent = ingredient.name;
            // Add a button to select the ingredient
            const selectButton = document.createElement('button');
            selectButton.textContent = 'Select';
            selectButton.onclick = function() {
              selectIngredient(ingredient.name);
            };
            li.appendChild(selectButton);
            ul.appendChild(li);
          });
          ingredientResults.appendChild(ul);
        } else if (data.error) {
          const p = document.createElement('p');
          p.textContent = data.error;
          ingredientResults.appendChild(p);
        }
      })
      .catch(error => console.error('Error:', error));
  }

  // Function to add the selected ingredient to the list of selected ingredients
  function selectIngredient(ingredientName) {
    const selectedIngredients = document.getElementById('selected-ingredients');
    const li = document.createElement('li');
    li.textContent = ingredientName;
    selectedIngredients.appendChild(li);
    // You can also add hidden input fields to store the selected ingredients in the form
    // For example:
    const input = document.createElement('input');
    input.type = 'hidden';
    input.name = 'ingredients';
    input.value = ingredientName;
    li.appendChild(input);
  }
</script>
{% endblock scripts %}


=======
>>>>>>> d1d867ee3e465e9eacdc29f6892d6fc26003579a
{% block content %}
<div class="container">
  <form method="POST">
    <fieldset class="form-group">
      <legend class="border-bottom mb-4">{% trans "Add Recipe" %}</legend>
    </fieldset>
    {% csrf_token %}
    {{ form.media }}
    {{ form.as_p }}
<<<<<<< HEAD
  
    <!-- Ingredient search section -->
    <h2>{% trans "Search Ingredients" %}</h2>
    <input type="text" name="query" id="ingredient-search" placeholder="{% trans "Search ingredients..." %}">
    <button type="button" onclick="searchIngredients()">{% trans "Search" %}</button>
    <div id="ingredient-results"></div>

    <!-- Selected ingredients section -->
    <h2>{% trans "Selected Ingredients" %}</h2>
    <ul id="selected-ingredients"></ul>

    <!-- Button to submit the form -->
    <div class="form-group py-3">
      <input class="btn btn-outline-primary" type="submit" value="{% trans "Save Recipe" %}" />
    </div>
=======

    <form id="apiform" method="POST" action="/">
      {% csrf_token %}

    <label for="username">Select category</label>
    <select name="cat" id="cat">
      <option selected value="">Select one</option>
        <option value="ingredients">Ingredients</option>
      </select>
    
    <label for="username">Search</label>
    <input type="search" id="query" name="query">
    <button type="submit">Submit</button>
>>>>>>> d1d867ee3e465e9eacdc29f6892d6fc26003579a
  </form>

  <div class="form-group py-3">
    <input class="btn btn-outline-primary" type="submit" value="Save Recipe" />
  </div>

  <div class="border-top pt-3">
    <a class="text-muted" href="{% url 'recipes-home' %}">{% trans "Cancel" %}</a>
  </div>
</div>
{% endblock content %}

