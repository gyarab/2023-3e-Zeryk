{% extends "recipes/box.html" %}
{% load i18n %}
{% load crispy_forms_tags %}
{% block content %}
<div class="background-container">
  <form method="POST" enctype="multipart/form-data" class="recipe-form">
    <fieldset class="form-group">
      <legend class="border-bottom mb-4">{% trans "Add Recipe" %}</legend>
    </fieldset>
    
    {% csrf_token %}
    {{ form.media }}
    {{ form.as_p }}

    <div class="form-group py-3">
      <input class="btn btn-primary" type="submit" value="{% trans "Save Recipe" %}" />
    </div>

    <div class="border-top pt-3">
      <a class="text-muted btn" href="{% url 'recipes-home' %}">{% trans "Cancel" %}</a>
    </div>
  </div>

  <img id="photo-prev" src="#" alt="Recipe Photo" style="display: none;"/>
  
  <script>
    document.getElementById('photo').addEventListener('change', function(event) {
      var output = document.getElementById('photo-prev');
      output.style.display = 'block';
      output.src = URL.createObjectURL(event.target.files[0]);
    });
  </script>
{% endblock content %}